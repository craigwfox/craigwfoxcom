---
import { getCollection } from "astro:content"
import FormattedDate from "../components/FormattedDate.astro"

const { count = 500 } = Astro.props

const posts = (await getCollection("blog")).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
)
---

<div class="post-feed">
  {
    posts.slice(0, count).map(post => (
      <article class="post-item">
        <a href={`/blog/${post.slug}/`}>
          <FormattedDate date={post.data.pubDate} />
          <h3>{post.data.title}</h3>
          <p>{post.data.description}</p>
        </a>
      </article>
    ))
  }
</div>
